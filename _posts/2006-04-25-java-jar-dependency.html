---
layout: post
title: Java Jar Dependency
categories:
- Programming
tags: []
status: publish
type: post
published: true
meta:
  pvc_views: '6'
  dsq_thread_id: '605808257'
author:
  login: air0day
  email: blog@air0day.com
  display_name: Rod Hilton
  first_name: Rod
  last_name: Hilton
---
<p>Jar files are definitely a good solution to a significant problem.  Nobody wants to transfer a Java application by sending hundreds of .class files to you and a txt file explaining which one is the entry point.  Jar files allow you to package your application into one file and send that, even allowing you to specify in the Jar file which class is the entry point.  This is an improvement, but it leaves a lot to be desired.</p>
<p><!--more--> There are two problems relating to Jar files that I believe Sun needs to address.  The first primarily affects desktop development.  While I understand that Java's place (lately) has been the server, there is an undeniable goal to make Java more prominent on the desktop.  For proof, look no further than Mustang: the additions to Swing in the latest version of Java are more significant in scope than nearly any other changes.  I've already talked about how the SystemTray class indicates a desire to be more useful on the desktop.</p>
<p>Unfortunately, the problem with Jar files becomes pretty serious when it comes to the desktop.  Basically, the problem is that there are a ton of useful 3rd-party libraries out there for Java.  Almost every application uses log4j, and packages like jakarta-commons make it possible for Java programmers to avoid reinventing the wheel regularly.  This is a good thing.  The problem is that, if I write an application that uses, say, five jar files, how do I give you the application?  Do I include those extra jar files in my transfer to you, perhaps as a zip file?  Then I have to also give you something like a batch file which will add the appropriate jar files to the classpath before loading the main jar.  There are installers, sure, but using something so large seems like overkill for small applications.</p>
<p>Well, I could include the 3rd party jar files in my jar file right?  Wrong, my application can't see the contents of those files unless I write my own class loader and include in the app.  Once again, overkill.  And even if this DID work, it seems kind of annoying to download 10 applications, each of which is larger because they each contain the log4j jar file.</p>
<p>The JRE needs some kind of central jar manager that keeps the global classpath up to date.  Something so that the JVM would see what is being loaded, then check this repository to see if it had a jar file that contained the required classes.  If nothing was found, it could somehow download the correct version of the jar file.  Of course, this creates a number of potential problems.  First of all, there would be significant security concerns (if two jars contain packages and classes that would satisfy the import statement, which one gets picked?  What if it is malicious in nature?) as well as connectivity concerns (how would it download the jar with no internet access) among other issues.  Perhaps these issues are the reason why nothing like this exists.  Even so, the current system is severely problematic, and there needs to be SOME kind of solution.</p>
<p>The other problem with jars relates to how developers use them.  Let's say I use a 3rd party library in my application, called LibraryX.  I include LibraryX.jar in my classpath when I compile or run my application.  The problem is that LibraryX uses LibraryY.jar.  Absolutely nothing will tell me this at compile time, since LibraryX.jar is already fully compiled, and was compiled with LibraryY.jar in the classpath.  I will compile my application and there will be no complaints by the compiler.  Indeed, when I <strong>run</strong> the application, it will run fine until a class in LibraryY.jar is used from inside a class in LibraryX.jar.  The only way for me to deal with this issue is to simply know that I need LibraryY.jar in my classpath.  Perhaps I can find this in LibraryX's documentation, or it may even include the jar in a download.</p>
<p>Some library downloads, however, include a number of additional libraries in the downloadable package.  Do I need to include all of them on my classpath?  What if I'm only using one class in LibraryX, and it doesn't use any of the additional jars included in the download?  I have no way of knowing which jars are needed, so I have to then include (and transfer, if I give my application to someone else) ALL of them in my classpath in order to avoid a sudden ClassNotFoundException.</p>
<p>What seems so odd to me is that, since all of the files are included in the classpath at compile-time, I can't think of a good reason why the compiler shouldn't try as hard as possible to do a full dependency resolution, and let you know if any libraries, or libraries used by those libraries, or libraries used by THOSE libraries, use libraries that you don't include in the classpath.</p>
