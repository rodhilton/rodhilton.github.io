---
layout: post
title: Fixing WAYD (What Are You Doing) Plugin for Gnome Deskbar 2.20.0
categories:
- Programming
tags:
- code
- linux
- twitter
- ubuntu
status: publish
type: post
published: true
meta:
  _edit_last: '1'
  syntaxhighlighter_encoded: '1'
  pvc_views: '2'
  dsq_thread_id: '606605806'
author:
  login: air0day
  email: blog@air0day.com
  display_name: Rod Hilton
  first_name: Rod
  last_name: Hilton
---
<p>I wanted to start experimenting with the Gnome Deskbar recently, particularly to make it easier to update my twitter feed.  There are a number of deskbar plugins for twitter updating, though most of them are obsolete because of recent changes to Deskbar.</p>
<p>I had a lot of trouble getting <a href="http://www.butterfat.net/wiki/Projects/DeskbarPlugins">WAYD</a> (a twitter/pownce/jaiku updater) to work with Deskbar, so I figured I'd post to explain what I had to do to make it work.</p>
<p><!--more--></p>
<p>First, when you download the plugin, you need to put it in the correct directory.  A lot of instructions tell you to place the file in <code>~/.gnome2/deskbar-applet/handlers</code> but these instructions are for older style plugins.  You want to place the file in <code>~/.gnome2/deskbar-applet/modules-2.20-compatible</code></p>
<p>Next, you need to rename the file.  The file is named to have a version number in the filename after a dash.  Dashes aren't allowed in python filenames, so rename <code>wayd-1.4.py</code> to <code>wayd.py</code></p>
<p>Last, you need to fix a small bug in the WAYD code.  Around line 375 you will see:</p>
<p>[python light="true"]<br />
  if not c.twitter() and not c.jaiku() and not p.pownce():<br />
[/python]</p>
<p>change this to:</p>
<p>[python light="true"]<br />
  if not c.twitter() and not c.jaiku() and not c.pownce():<br />
[/python]</p>
<p>Then you can reload Deskbar (remove it from your panel and re-add it), right click the icon, go to preferences, and enable the plugin.  Be sure to put your login information in by clicking 'more' on the preferences screen.</p>
<p><b>Update:</b> You also need to change line 107 from</p>
<p>[python light="true"]<br />
  except URLError, e:<br />
[/python]</p>
<p>to</p>
<p>[python light="true"]<br />
        except urllib2.URLError, e:<br />
[/python]</p>
<p>To prevent a crash when there's a problem with twitter updates.  Additionally, if you post a message that's too long (>140 characters) to twitter, you get an unhelpful generic error message.  To make it tell you something useful, find the following code</p>
<p>[python light="true"]<br />
  message = &quot;Your post to Twitter might have had a problem&quot;<br />
[/python]</p>
<p>and add this below it:</p>
<p>[python firstline="100"]<br />
        if len(self.text) &gt; 140:<br />
            message=&quot;Your post is too long for Twitter.&quot;<br />
            n = pynotify.Notification(&quot;Twitter Results&quot;, message, &quot;stock_internet&quot;)<br />
            n.show()<br />
            return<br />
[/python]</p>
<p>I've sent the author my changes, so hopefully he'll update his site with a new copy of the file and make this post obsolete.</p>
<p><b>Updatier Update:</b> The author has merged my changes in.  Go to <a href="http://www.butterfat.net/wiki/Projects/DeskbarPlugins">his site</a> to get the latest version (you still need to rename it to wayd.py though).</p>
