<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Absolutely No Machete Juggling &raquo; Finding High-Impact Areas for Refactoring</title>
        <meta name="viewport" content="width=device-width" />
        <link rel="alternate" type="application/rss+xml" title="Absolutely No Machete Juggling &raquo; All Posts" href="/rss.xml" />
        
        
          <link rel="alternate" type="application/rss+xml" title="Absolutely No Machete Juggling &raquo; 'Life' Posts Only" href="/category/life/rss.xml" />
        
          <link rel="alternate" type="application/rss+xml" title="Absolutely No Machete Juggling &raquo; 'Programming' Posts Only" href="/category/programming/rss.xml" />
        
          <link rel="alternate" type="application/rss+xml" title="Absolutely No Machete Juggling &raquo; 'Technology' Posts Only" href="/category/technology/rss.xml" />
        

        <link rel="alternate" type="application/rss+xml" title="Absolutely No Machete Juggling &raquo; Comments" href="http://nomachetejuggling.disqus.com/latest.rss" />    

        <link rel="icon" href="/assets/favicon.png" type="image/png">
        <link rel="shortcut icon" href="/assets/favicon.png" type="image/png">

        <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic|Source+Code+Pro|Architects+Daughter' rel='stylesheet' type='text/css'>

        <link rel="stylesheet" href="/css/main.css">
        <link rel="stylesheet" href="/css/googlecode.css">

        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    </head>
<body>
<div id="page">
  <div id="headerwrapper">
    <div class="header">
      <div class="headertitle">
        <h1><a href="/" title="Absolutely No Machete Juggling: Rod Hilton&#039;s rants about stuff he cares about way too much.">Absolutely No Machete Juggling</a></h1>
        <p>Rod Hilton&#039;s rants about stuff he cares about way too much...</p>
      </div>
    </div>
  </div>
  <div id="navbar">
    <div id="navcontainer">
      <ul id="navlist">
  
  <li class="cat-item "><a href="/">All</a></li>

  
    
    <li class="cat-item "><a href="/category/life">LIFE</a>
  
    
    <li class="cat-item current-cat"><a href="/category/programming">PROGRAMMING</a>
  
    
    <li class="cat-item "><a href="/category/technology">TECHNOLOGY</a>
  

  
    
    <li class="menu-item "><a href="/about.html">ABOUT</a></li>
  
    
    <li class="menu-item "><a href="/resume.html">RéSUMé</a></li>
  
    
    <li class="menu-item "><a href="/projects.html">PROJECTS</a></li>
  
    
    <li class="menu-item "><a href="/contact.html">CONTACT</a></li>
  
    
    <li class="menu-item "><a href="/links.html">LINKS</a></li>
  
</ul><!-- /navlist -->
    </div><!-- /navcontainer -->
  </div><!-- /navbar -->

  <div id="wrapper">
    <div id="content">
      <div class="post">
	<div class="postheader">
  	<h1 class="posttitle"><a href="/2010/07/06/finding-high-impact-areas-for-refactoring/">Finding High-Impact Areas for Refactoring</a></h1>
  	<div class="postmeta">
		<p class="meta">
		<b title="code, Code Reviews, complexity, Continuous Integration, crossposted, java, metrics, quality, Refactoring, and ruby">PROGRAMMING</b> - 
		July 6, 2010 - 
		1,315 words -
		<a href="/2010/07/06/finding-high-impact-areas-for-refactoring/#disqus_thread">Comments</a>
		</p>
	</div>
</div>
	<div class="postentry">
		<p>At Rally, we&#39;ve stayed committed for the last 7 years to never telling the business that the product has to halt active development to pay down technical debt.  For us, the &quot;big rewrite in the sky&quot; has always been off the table.  Instead, we prefer to incrementally refactor and improve the existing elements of the codebase, gradually getting it to where we want it to be without ever halting feature development completely.</p>

<p>This has never been an easy task.  The truth is, the codebase is quite old by engineering standards, many parts of it written before standards emerged in the industry.  Our entire persistence layer, for example, was created by hand well before libraries such as Hibernate existed (or at least, before they became standard practice).  This means that there are many, many areas of the code that we&#39;d like to attack and improve.</p>

<p>One thing we&#39;ve started doing is holding lunchtime &quot;refactotums,&quot; where we take a look at some code and try to improve it.  Of course, with such a large codebase, and so many areas of the code that have not been touched since they were first written, we&#39;ve often wondered how to most effectively spend our refactotum time.  This led us to wonder &quot;what are the areas of the code where a refactoring would have the greatest impact?&quot;</p>

<p>We started keeping track of our codebase using <a href="http://www.sonarsource.org/">Sonar</a> which was extremely helpful in keeping track of metrics at a class level, but it didn&#39;t give us quite enough information.  For example, if <code>Class A</code> has a complexity score of 500 and <code>Class B</code> has a complexity score of 200 (higher is worse), you&#39;d think that spending some time cleaning up <code>Class A</code> would be the most effective thing to do.  But what if <code>Class B</code> is used by 50 times as many other classes as <code>Class A</code>?  Or what if <code>Class B</code>, complicated as it is, has never been modified in the history of the project?  It would be nice to clean this class up, but it might be a better use of time to focus on <code>Class A</code></p>

<p>So our idea was to combine two metrics: the class complexity (based on <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity">McCabe Cyclomatic Complexity</a>) and the number of times a file has been modified in the codebase.  The idea here was, every time a file has to be modified, it has to be read.  A complex file is harder to read, making the engineer more likely to misunderstand or make a mistake while editing the file.</p>

<p>Luckily, git makes it quite easy to count the number of modifications to files in the codebase:</p>
<div class="highlight"><pre><code class="language-terminal" data-lang="terminal">git whatchanged | grep '^:.*alm-webapp/src/main/java/.*\.java$' | cut -c65- | sed -e 's/\//./g' -e 's/.java//' | sort | uniq -c | sort -r
</code></pre></div>
<p>Obviously, the grep and cut would have to be modified slightly depending on your codebase structure.  The grep is used to ensure only our code is looked at, excluding any third-party code in the system.  The cut and seds are mostly just about munging the filenames into &quot;probable&quot; classnames, since that&#39;s more useful (and what Sonar stores).</p>

<p>This command yields some high-traffic files, but it needs to be combined with high-value targets as well.  For this, we turned to Sonar.</p>

<p>We were unable to use the Sonar web services as thoroughly as we were hoping, so we wound up writing a query directly against the database where the Sonar data is stored. The query for a given metric (in our case, metric 12, class complexity) looks like this:</p>
<div class="highlight"><pre><code class="language-sql" data-lang="sql">SELECT projects.kee, project_measures.value, project_measures.metric_id
FROM snapshots, project_measures, projects
WHERE islast = 1
  AND project_measures.snapshot_id = snapshots.id
  AND project_measures.metric_id = 12
  AND snapshots.qualifier = 'CLA'
  AND snapshots.project_id = projects.id
</code></pre></div>
<p>We wrote a Ruby script that pulled the data from these two sources and correlated them together, deriving an eventual &quot;weighted rank&quot; from the two.  We went on to include a few more metrics in the final equation.   Output from the script looks like this:</p>
<div class="highlight"><pre><code class="language-output" data-lang="output">Calculating complexity data from sonar...Done!
Calculating revision data from git...Done!
Calculating weighted rank data...Done!
Current formula:
   ( 0.15 * ( complexity / average_complexity ) )
 + ( 0.40 * ( function_complexity / average_function_complexity ) )
 + ( 0.30 * ( efferent_coupling / average_efferent_coupling ) )
 + ( 0.40 * ( revisions / average_revisions ) )

Rank    Score  Revisions  Complexity  F.Complexity  E.Coupling  Class
----  -------  ---------  ----------  ------------  ----------  -----
   1    14.12         60         507             2          67  com.rallydev.ClassG
   2    13.10         93         301             2          71  com.rallydev.ClassQ
   3    12.53         80         318             2          70  com.rallydev.ClassR
   4    11.25         11          45            45          27  com.rallydev.ClassO
   5     9.65          9          43            43           8  com.rallydev.ClassC
   6     9.48         72         194             2          52  com.rallydev.ClassZ
   7     9.24         60         205             2          56  com.rallydev.ClassN
   8     8.79         42         218             2          59  com.rallydev.ClassK
   9     8.75         31         260             3          53  com.rallydev.ClassF
  10     8.63         54         167             2          59  com.rallydev.ClassT
  11     8.38         65         194             2          39  com.rallydev.ClassO
  12     8.29         44         207             3          49  com.rallydev.ClassY
  13     7.81         40         225             2          41  com.rallydev.ClassP
  14     7.48         18          26            26          23  com.rallydev.ClassK
  15     7.44         60         164             2          34  com.rallydev.ClassA
</code></pre></div>
<p>We&#39;ve found it pretty useful to know where our efforts would be most useful.  If you&#39;re using git and sonar, feel free to modify this script and try it on your own codebase (note, you will need the mysql client binary in your path for it to work).</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby">#!/usr/bin/env ruby
# Authors: Rod Hilton and Ryan Scott
# Site: www.rallydev.com

METRICS = {12=&gt;:complexity, 14=&gt;:function_complexity, 74=&gt;:efferent_coupling}
WEIGHTS = {:revisions=&gt;0.4, :complexity=&gt;0.15, :function_complexity=&gt;0.4, :efferent_coupling=&gt;0.3}

def print_around(title, &amp;amp;block)
  print title + &quot;...&quot;
  STDOUT.flush
  yield block
  print &quot;Done!\n&quot;
end

def add_class_data(class_data, class_name, data_key, data_value)
  class_data[class_name] = {} unless class_data.has_key?(class_name)
  class_data[class_name][data_key] = data_value
end

def add_complexity_data(class_data)
  complexity_query = &lt;&lt;-EOF
    SELECT projects.kee, project_measures.value, project_measures.metric_id
    FROM snapshots, project_measures, projects
    WHERE islast = 1
      AND project_measures.snapshot_id = snapshots.id
      AND project_measures.metric_id in (#{METRICS.keys.join(&quot;,&quot;)})
      AND snapshots.qualifier = 'CLA'
      AND snapshots.project_id = projects.id
    EOF

  print_around &quot;Calculating complexity data from sonar&quot; do
    complexity = `echo &quot;#{complexity_query}&quot; | mysql -h alm-build --user=YOUR_SONAR_USERNAME --password=YOUR_SONAR_PASSWORD --database=YOUR_SONAR_DATABASE`

    complexity.each do |complexity_line|
      match = complexity_line.match(/^(\S*)\s+([\d\.]+)\s+(\d+)$/)
      if(match)
        name = match[1]
        metric = match[2].to_f
        metric_id = match[3].to_i
        metric_name = METRICS[metric_id]
        add_class_data(class_data, name.match(/^.*:([^:]*)$/)[1], metric_name, metric)
      end
    end
  end
end

def add_revision_data(class_data)
  print_around &quot;Calculating revision data from git&quot; do
    file_changes = `git whatchanged | grep '^:.*alm-webapp/src/main/java/.*\.java$' | cut -c65- | sed -e 's/\//./g' -e 's/.java//' | sort | uniq -c | sort -r`
    # file_changes = `cat modified.txt`

    file_changes.each do |file_change_line|
      match = file_change_line.match(/^\s*(\d+)\s+(.*)$/)
      if(match)
        revisions = match[1].to_i
        name = match[2]
        add_class_data(class_data, name, :revisions, revisions)
      end
    end
  end
end

def average_for_data(class_data, key)
  values = class_data.values.collect{|val| val[key]}
  values.inject{ |sum, el| sum + el }.to_f / values.size
end

def add_weighted_rank_data(class_data)

  print_around &quot;Calculating weighted rank data&quot; do
    averages = {}
    WEIGHTS.each do |key, value|
      average = average_for_data(class_data, key)
      averages[key] = average
    end

    class_data.each do |classname, data|
      data[:weighted_rank] = 0
      WEIGHTS.each do |key, weight|
        chunk = weight * (data[key] / averages[key])
        data[:weighted_rank] = data[:weighted_rank] + chunk
      end
    end
  end
end

def remove_classes_without_all_data(class_data)
  num_keys = class_data.values.map{|val| val.size}.max
  class_data.delete_if{|key, val| val.size &lt; num_keys}
end

# --- Main ---

class_data = {}

add_complexity_data(class_data)
add_revision_data(class_data)

class_data = remove_classes_without_all_data(class_data)

add_weighted_rank_data(class_data)

#Sort by rank, descending

class_data_sorted = class_data.sort{|a,b| b[1][:weighted_rank] &lt;=&gt; a[1][:weighted_rank]}

puts &quot;Current formula: &quot;
pieces = []
WEIGHTS.each do |key, weight|
  pieces &lt;&lt; sprintf( &quot;( %3.2f * ( %s / %s ) )&quot;, weight, key.to_s, &quot;average_&quot;+key.to_s)
end
puts &quot;   &quot; + pieces.join(&quot;\n + &quot;)

puts &quot;\n&quot;
puts &quot;Rank    Score  Revisions  Complexity  F.Complexity  E.Coupling  Class&quot;
puts &quot;----  -------  ---------  ----------  ------------  ----------  -----&quot;
class_data_sorted[0..49].each_with_index do |file, index|
  class_name=file[0]
  class_data=file[1]
  printf(&quot;%4u  %7.2f  %9u  %10u  %12u  %10u  %s\n&quot;, (index+1), class_data[:weighted_rank], class_data[:revisions], class_data[:complexity], class_data[:function_complexity], class_data[:efferent_coupling], class_name)
end
</code></pre></div>
<p>Feel free to make any improvements or changes to this script that you wish.  It&#39;s not the most efficient in the world, but it was thrown together pretty quickly to get a decent idea of our highest-impact refactoring targets.</p>

<p>Suggestions for improving the formula?  Made your own changes to the script?  Feel free to post in the comments below, we welcome the discussion!</p>

	</div>
</div>

    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'nomachetejuggling'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    </div>  

  </div><!-- /wrapper -->

  <div id="sidebar-wrapper">
   <div id="sidebars">
      <div id="sidebar-left" class="sidebar">
        <ul>
          <li id="text-3" class="widget widget_text"> 
            <div class="textwidget">
              <img src="http://www.gravatar.com/avatar/68ca541f6f4eaedbe7d711cd651cf451.png?s=100" style="float: left; margin: 0px 5px 3px 0; border: 1px solid black; width: 50px; height: 50px" width=50 height=50>Absolutely No Machete Juggling is a blog about software, programming, computers, and me. I'm a programmer working in Colorado, mostly with Java and Ruby. <a href="/about.html">Read More...</a>
            </div>
          </li>
          <li id="recent-posts" class="widget widget_recent_entries"> <h2 class="widgettitle">Recent Posts</h2>
            <ul>
                
                  <li><a href="/2015/11/13/phd-research-status-report/">PhD Status Report</a></li>
                
                  <li><a href="/2015/08/27/testing-against-template-renders-in-grails/">Testing Against Template Renders in Grails</a></li>
                
                  <li><a href="/2015/07/01/qconny-2015-a-review/">QCon New York 2015: A Review</a></li>
                
                  <li><a href="/2014/07/04/uploading-a-jekyll-site-to-rackspace-cloudfiles/">Uploading a Jekyll Site to Rackspace Cloudfiles</a></li>
                
                  <li><a href="/2014/06/24/the-worst-programming-interview-question/">The Worst Programming Interview Question</a></li>
                
                  <li><a href="/2014/02/05/top-10-career-changing-programming-books/">Top 10 Career-Changing Programming Books</a></li>
                
                  <li><a href="/2013/12/17/centurylink-traps-and-caps/">CenturyLink: Traps and Caps</a></li>
                
                  <li><a href="/2013/08/30/diving-into-android/">Diving Into Android</a></li>
                
                  <li><a href="/2013/07/30/oscon-2013-a-review/">OSCON 2013: A Review</a></li>
                
                  <li><a href="/2013/06/10/book-review-presentation-patterns/">Book Review: Presentation Patterns</a></li>
                
            </ul>
          </li> <!-- /recent-posts -->
          <li id="tag_cloud" class="widget">
            <h2 class="widgettitle">Tags</h2>
            <div class="ctc">
                
                  <a href="/tag/code" style="font-size: 19pt">
                    code
                  </a>
                
                  <a href="/tag/java" style="font-size: 13pt">
                    java
                  </a>
                
                  <a href="/tag/career" style="font-size: 13pt">
                    career
                  </a>
                
                  <a href="/tag/school" style="font-size: 12pt">
                    school
                  </a>
                
                  <a href="/tag/ruby" style="font-size: 10pt">
                    ruby
                  </a>
                
                  <a href="/tag/agile" style="font-size: 10pt">
                    agile
                  </a>
                
                  <a href="/tag/crossposted" style="font-size: 8pt">
                    crossposted
                  </a>
                
                  <a href="/tag/book" style="font-size: 8pt">
                    book
                  </a>
                
                  <a href="/tag/software" style="font-size: 8pt">
                    software
                  </a>
                
                  <a href="/tag/computer-science" style="font-size: 8pt">
                    computer science
                  </a>
                
                  <a href="/tag/interview" style="font-size: 8pt">
                    interview
                  </a>
                
                  <a href="/tag/job" style="font-size: 8pt">
                    job
                  </a>
                
                  <a href="/tag/semester" style="font-size: 8pt">
                    semester
                  </a>
                
                  <a href="/tag/review" style="font-size: 8pt">
                    review
                  </a>
                
                  <a href="/tag/rails" style="font-size: 8pt">
                    rails
                  </a>
                
                  <a href="/tag/class" style="font-size: 8pt">
                    class
                  </a>
                
                  <a href="/tag/linux" style="font-size: 8pt">
                    linux
                  </a>
                
                  <a href="/tag/ubuntu" style="font-size: 8pt">
                    ubuntu
                  </a>
                
                  <a href="/tag/complexity" style="font-size: 7pt">
                    complexity
                  </a>
                
                  <a href="/tag/development" style="font-size: 7pt">
                    development
                  </a>
                
                  <a href="/tag/continuous-integration" style="font-size: 7pt">
                    continuous integration
                  </a>
                
                  <a href="/tag/business" style="font-size: 7pt">
                    business
                  </a>
                
                  <a href="/tag/open-source" style="font-size: 7pt">
                    open source
                  </a>
                
                  <a href="/tag/tdd" style="font-size: 7pt">
                    tdd
                  </a>
                
                  <a href="/tag/rant" style="font-size: 7pt">
                    rant
                  </a>
                
                  <a href="/tag/design" style="font-size: 7pt">
                    design
                  </a>
                
                  <a href="/tag/windows" style="font-size: 7pt">
                    windows
                  </a>
                
                  <a href="/tag/internet" style="font-size: 7pt">
                    internet
                  </a>
                
                  <a href="/tag/refactoring" style="font-size: 7pt">
                    refactoring
                  </a>
                
                  <a href="/tag/college" style="font-size: 7pt">
                    college
                  </a>
                
                  <a href="/tag/git" style="font-size: 7pt">
                    git
                  </a>
                
                  <a href="/tag/compsci" style="font-size: 7pt">
                    compsci
                  </a>
                
                  <a href="/tag/technical-debt" style="font-size: 7pt">
                    technical debt
                  </a>
                
                  <a href="/tag/estimating" style="font-size: 7pt">
                    estimating
                  </a>
                
                  <a href="/tag/quality" style="font-size: 7pt">
                    quality
                  </a>
                
                  <a href="/tag/brain" style="font-size: 7pt">
                    brain
                  </a>
                
                  <a href="/tag/productivity" style="font-size: 7pt">
                    productivity
                  </a>
                
                  <a href="/tag/automated-testing" style="font-size: 7pt">
                    automated testing
                  </a>
                
                  <a href="/tag/junit" style="font-size: 7pt">
                    junit
                  </a>
                
                  <a href="/tag/testing" style="font-size: 7pt">
                    testing
                  </a>
                
                  <a href="/tag/estimation" style="font-size: 7pt">
                    estimation
                  </a>
                
                  <a href="/tag/education" style="font-size: 7pt">
                    education
                  </a>
                
                  <a href="/tag/mac" style="font-size: 7pt">
                    mac
                  </a>
                
                  <a href="/tag/blog" style="font-size: 7pt">
                    blog
                  </a>
                
                  <a href="/tag/latex" style="font-size: 7pt">
                    latex
                  </a>
                
                  <a href="/tag/patch" style="font-size: 7pt">
                    patch
                  </a>
                
                  <a href="/tag/certification" style="font-size: 7pt">
                    certification
                  </a>
                
                  <a href="/tag/tests" style="font-size: 7pt">
                    tests
                  </a>
                
                  <a href="/tag/wordpress" style="font-size: 7pt">
                    wordpress
                  </a>
                
                  <a href="/tag/planning" style="font-size: 7pt">
                    planning
                  </a>
                
                  <a href="/tag/jenkins" style="font-size: 7pt">
                    jenkins
                  </a>
                
                  <a href="/tag/professionalism" style="font-size: 7pt">
                    professionalism
                  </a>
                
                  <a href="/tag/functional" style="font-size: 7pt">
                    functional
                  </a>
                
                  <a href="/tag/story" style="font-size: 7pt">
                    story
                  </a>
                
                  <a href="/tag/programming-languages" style="font-size: 7pt">
                    programming languages
                  </a>
                
                  <a href="/tag/scala" style="font-size: 7pt">
                    scala
                  </a>
                
                  <a href="/tag/rage" style="font-size: 7pt">
                    rage
                  </a>
                
                  <a href="/tag/c" style="font-size: 7pt">
                    c#
                  </a>
                
                  <a href="/tag/books" style="font-size: 7pt">
                    books
                  </a>
                
                  <a href="/tag/conference" style="font-size: 7pt">
                    conference
                  </a>
                
            </div>
          </li><!-- /tag-cloud -->
          <li class="widget widget_text" id="text-4">
            <div class="textwidget">
              <div align="center">
                <a href="http://www.eff.org/action"><img src="/assets/eff.gif"></a>
              </div>
            </div>
          </li>
        </ul>
      </div><!-- /sidebar-left -->

      <div id="sidebar-right" class="sidebar">
        <div id="social-icons">
          
              <a href="http://about.me/rodhilton" title="about.me" class="social-icon dimmed" style="background-color: #eeb111">
                <img src="/assets/social/aboutme.png"/>
              </a>
          
              <a href="https://twitter.com/rodhilton" title="Twitter" class="social-icon dimmed" style="background-color: #55acee">
                <img src="/assets/social/twitter.png"/>
              </a>
          
              <a href="http://www.linkedin.com/in/rodhilton" title="LinkedIn" class="social-icon dimmed" style="background-color: #0976b4">
                <img src="/assets/social/linkedin.png"/>
              </a>
          
              <a href="http://github.com/rodhilton" title="GitHub" class="social-icon dimmed" style="background-color: #000000">
                <img src="/assets/social/github.png"/>
              </a>
          
              <a href="http://speakerdeck.com/rodhilton" title="Speakerdeck" class="social-icon dimmed" style="background-color: #218d5e">
                <img src="/assets/social/speakerdeck.png"/>
              </a>
          
              <a href="https://coderwall.com/p/u/rodhilton" title="Coderwall" class="social-icon dimmed" style="background-color: #3990d0">
                <img src="/assets/social/coderwall.png"/>
              </a>
          
              <a href="https://facebook.com/rodhilton" title="Facebook" class="social-icon dimmed" style="background-color: #3b5998">
                <img src="/assets/social/facebook.png"/>
              </a>
          
              <a href="http://www.goodreads.com/user/show/1499157-rodhilton-hilton" title="Goodreads" class="social-icon dimmed" style="background-color: #76420a">
                <img src="/assets/social/goodreads.png"/>
              </a>
          
              <a href="http://letterboxd.com/rodhilton/films/ratings/" title="Letterboxd" class="social-icon dimmed" style="background-color: #21282f">
                <img src="/assets/social/letterboxd.png"/>
              </a>
          
              <a href="http://www.grouvee.com/user/rodhilton/shelves/3274-played" title="Grouvee" class="social-icon dimmed" style="background-color: #dda017">
                <img src="/assets/social/grouvee.png"/>
              </a>
          
              <a href="http://www.last.fm/user/rodhilton" title="Last.fm" class="social-icon dimmed" style="background-color: #c3000d">
                <img src="/assets/social/lastfm.png"/>
              </a>
          
              <a href="http://www.diigo.com/user/rodhilton" title="Diigo" class="social-icon dimmed" style="background-color: #0079ff">
                <img src="/assets/social/diigo.png"/>
              </a>
          
        </div>
      </div><!-- /sidebar-right -->

    </div><!-- /sidebars -->
    </div><!--/sidebar-wrapper-->

</div> <!-- /page -->

<!-- Javascript -->
<script type="text/javascript">
/*The sidebar shouldn't be visible until it's been positioned, but just in case someone disables JS we leave it visible in CSS and immediately hide it here */
$("#sidebars").css({visibility: "hidden"});
</script>

<script src="/scripts/editableCodeHighlight.js" type="text/javascript"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js" type="text/javascript"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/highlight.min.js"></script>

<script src="/scripts/jquery.lazyload.mini.js"></script>

<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<script src="/scripts/hyphenator/Hyphenator.js" type="text/javascript"></script>
<script src="/scripts/hyphenator/patterns/en-us.js" type="text/javascript"></script>      
<script src="/scripts/startup.js" type="text/javascript"></script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [["$$","$$"], ["\\(","\\)"]],
      displayMath: [["$$$","$$$"],["\\[","\\]"]]
    },
    TeX: {
      extensions: ["AMSmath.js", "AMSsymbols.js"]
    },
    "HTML-CSS": {
      scale: 96
    }
  });
</script>

<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'nomachetejuggling'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-379031-4', 'auto');
  ga('send', 'pageview');

</script> 

</body>
</html>
